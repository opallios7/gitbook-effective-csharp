# Item #6 Value 타입과 Reference 타입을 구분하라.

C/C++에서는 모든 자료형이 value타입이며 필요에 따라서 reference타입을 언제든 만들수 있다. 자바에서는 모든 자료형이 reference타입이다. 하지만 C#에서는 타입을 정의할 때에 해당 타입의 인스턴스들이 어떤식으로 동작할 지를 미리 결정해야 한다.

### Value 타입
  + 정의방법 : struct
  + 객체의 내부 필드값에 들어있는 값을 복사
  + 저장소는 스택
  + 주로 값을 저장하기 위해서 사용
  
### Reference 타입
  + 정의방법 : class
  + 객체의 내부 필드값을 외부로 노출
  + 저장소는 힙
  + 주로 행동(Method)을 저장하기 위해서 사용


닷넷의 공식문서는 value 타입과 reference 타입을 결정하는 요소로 타입의 크기 또한 고려할 것을 권고하고 있다. value 타입은 reference 타입에 비해 메모리 단편화가 적고 garbage도 덜 생성하며 좀 더 직접적으로 객체를 사용할 수 있다. 더욱 더 중요한 것은 메서드나 프로퍼티에서 value 타입을 사용하면 값에 대한 복사가 일어나기 때문에 객체내부의 값을 외부로 전달하더라도 아무런 문제가 없다. 하지만 실제로 이러한 관점보다는 타입을 어떻게 사용할 것인가에 대해서 좀더 고려하는 편이 낫다. 왜냐하면 value 타입은 객체지향에서 공통적으로 제공하는 기술을 사용할 수 없고, value 타입을 상속하는 객체를 생성할 수도 없다. 따라서 모든 value 타입은 'sealed'로 선언하는 것을 고려하는 편이 좋다. 물론 value 타입이 interface를 구현할 수도 있지만, 이 경우 boxing이 일어나게 되므로 속도저하를 가져올 가능성이 있다. <strong>value 타입을 객체지향적 관점에서 바라보지 말고 단순한 값의 저장소로만 생각하자.</strong>

value 타입보다는 reference 타입을 더 많이 사용할 것이다. 만일 다음 질문에 모두 "예"라고 답변할 수 있는 경우에만 value 타입을 사용하는 편이 좋다.

1. 타입이 단지 데이터를 저장하기 위해서만 사용하는가?
2. 모든 public interface가 단지 내부적인 값을 획득하거나 수정하기 위해서만 사용되고 있는가?
3. 타입은 앞으로 상속될 가능성이 전혀 없다고 확신할 수 있는가?
4. 타입은 앞으로 다형적으로 다루어져야 할 필요가 없다고 확신할 수 있는가?

## 결론
<em><strong>value 타입을 단순히 저수준의 자료 저장소로만 생각하자. 행동을 정의해야 한다면 reference 타입을 사용하자. value 타입이 특정 객체 내에 자료저장을 위해서 사용될 경우 이 값이 객체 외부로 전달되더라도 복사본이 전달되기 때문에 좀 더 안정적이다. 또한 스택 메모리를 사용하기 때문에 메모리 사용의 효율이 좀 더 증대되고 애플리케이션의 로직을 생성하기 위한 기본적인 표준화 기법을 사용할 수 있다. 하지만 value 타입의 추후 동작방식에 대해서 조금이라도 의구심이 든다면 reference 타입을 사용하자.</strong></em>
